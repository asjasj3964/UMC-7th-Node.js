### ğŸ”¥ ë¯¸ì…˜
---
1. Google ë¡œê·¸ì¸ ì™¸ì˜ ë‹¤ë¥¸ ì†Œì…œ ë¡œê·¸ì¸ ì—°ë™í•˜ê¸°
    1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—°ë™
        1. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ OAuth ì‹ ì²­
            1. ì• í”Œë¦¬ì¼€ì´ì…˜ ì¶”ê°€í•˜ê¸°<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì• í”Œë¦¬ì¼€ì´ì…˜_ì¶”ê°€](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì• í”Œë¦¬ì¼€ì´ì…˜_ì¶”ê°€.png)
                - [ì¹´ì¹´ì˜¤ ë””ë²¨ë¡œë²„](https://developers.kakao.com)ì— ì ‘ì†í•´ ê¸°ì¡´ì˜ ì¹´ì¹´ì˜¤ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í–ˆë‹¤.
                - ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¶”ê°€í•´ ì•„ì´ì½˜(ë¹„ì¦ˆì•± ì „í™˜ì„ ìœ„í•¨), ì´ë¦„, ì‚¬ì—…ìëª…ì„ ëª…ì‹œí•´ì£¼ì—ˆë‹¤.
            2. ë„ë©”ì¸ ë“±ë¡í•˜ê¸°<br/>
                ![ë¯¸ì…˜-1-ë„ë©”ì¸_ë“±ë¡](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë„ë©”ì¸_ë“±ë¡.png)
                - ë¨¼ì € í”Œë«í¼ì„ ì„ íƒí•˜ê³ (Web) ì‚¬ì´íŠ¸ ë„ë©”ì¸ì„ ì§€ì •í•´ì£¼ì—ˆë‹¤.
                - ì½œë°± ë°›ì„ ë„ë©”ì¸ì„ ë“±ë¡í•´ì•¼ ì¹´ì¹´ì˜¤ ì„œë²„ë¡œë¶€í„° ì¹´ì¹´ì˜¤ ê³„ì • ì •ë³´ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
            3. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í™œì„±í™” ë° Redirect URI ì§€ì •<br/>
                ![ë¯¸ì…˜-1-ë¡œê·¸ì¸_í™œì„±í™”](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë¡œê·¸ì¸_í™œì„±í™”.png)<br/>
                ![ë¯¸ì…˜-1-Redirect_URI_ì§€ì •](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_Redirect_URI_ì§€ì •.png)
                - ì¹´ì¹´ì˜¤ ì„œë²„ì—ì„œ REST API GET ìš”ì²­ì„ ë³´ë‚¼ Redirect URIë¥¼ ëª…ì‹œí•´ì£¼ì—ˆë‹¤.
            4. ì¹´ì¹´ì˜¤ ë™ì˜ í•­ëª© ì„¤ì •<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë™ì˜í•­ëª©_ì„¤ì •_ì´ˆë°˜](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë™ì˜í•­ëª©_ì„¤ì •_ì´ˆë°˜.png)
                - ë™ì˜ í•­ëª© ì„¤ì •ì„ í•  ë•Œ ì²˜ìŒì—” ìœ„ì™€ ê°™ì´ ì´ë©”ì¼ì„ ë™ì˜ í•­ëª©ì— ì¶”ê°€í•  ìˆ˜ ì—†ë‹¤ê³  ë˜ì–´ ìˆì—ˆë‹¤. ê·¸ë ‡ì§€ë§Œ ë‚´ê°€ ì„¤ê³„í•œ íšŒì›ê°€ì…ì€ ì´ë©”ì¼ë¡œ ì‚¬ìš©ìë¥¼ ì‹ë³„í•´ì•¼ ëê¸° ë•Œë¬¸ì— ì¹´ì¹´ì˜¤ì—ì„œ ì´ë©”ì¼ì„ ë°›ì•„ì™€ì•¼ í–ˆë‹¤.
                - ë™ì˜ í•­ëª©ì— ì´ë©”ì¼ê³¼ ê°™ì€ ê¸°íƒ€ ì •ë³´ë¥¼ ì¶”ê°€í•˜ë ¤ë©´ í•´ë‹¹ ì• í”Œë¦¬ìºì´ì…˜ì„ ë¹„ì¦ˆ ì•±ìœ¼ë¡œ ì „í™˜í•´ì•¼ ëëŠ”ë° ì´ë¥¼ ìœ„í•´ì„  ì‚¬ì—…ì ì •ë³´ë¥¼ ë“±ë¡í•´ì•¼ í–ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì‚¬ì—…ì„ ëª©ì ìœ¼ë¡œ ë§Œë“  ê²ƒë„ ì•„ë‹ˆê³  ë‹¨ì§€ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì—°ë™ì„ ìœ„í•œ í…ŒìŠ¤íŠ¸ ìš©ì´ì—ˆê¸°ì— ì‚¬ì—…ì ì •ë³´ë¥¼ ë“±ë¡í•˜ì§€ ì•Šê³  ë¹„ì¦ˆì•±ìœ¼ë¡œ ì „í™˜í•˜ëŠ”  ë°©ë²•ì„ ì°¾ì•„ë³´ì•˜ë‹¤.<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ê°œì¸ê°œë°œì_ë¹„ì¦ˆì•±_ì „í™˜](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ê°œì¸ê°œë°œì_ë¹„ì¦ˆì•±_ì „í™˜.png)
                - ë‹¤í–‰íˆë„ ì‚¬ì—…ì ë“±ë¡ ë²ˆí˜¸ ì—†ì´ ê°œì¸ ê°œë°œì ë¹„ì¦ˆ ì•±ìœ¼ë¡œ ì „í™˜í•˜ëŠ” ë°©ë²•ì´ ìˆì—ˆëŠ”ë° ì´ë¥¼ ìœ„í•´ ì¹´ì¹´ì˜¤ ë¹„ì¦ˆë‹ˆìŠ¤ì— ê°€ì…í•´ì•¼ í–ˆë‹¤.<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë™ì˜í•­ëª©_ì„¤ì •](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë™ì˜í•­ëª©_ì„¤ì •.png)
                - ë¹„ì¦ˆ ì•± ì „í™˜ ëª©ì ì„ ì´ë©”ì¼ í•„ìˆ˜ ë™ì˜ë¡œ ì²´í¬í•´ë‘ë‹ˆ, ì´ë©”ì¼ì„ ì •ë³´ ë™ì˜ í•­ëª©ì— ì¶”ê°€í•  ìˆ˜ ìˆì—ˆë‹¤.
            5. ì¹´ì¹´ì˜¤ REST API í‚¤(Client ID)ë¥¼ í™•ì¸í•œë‹¤.<br/> 
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì•±í‚¤](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì•±í‚¤.png)
                - REST API KEY
                    - REST APIë¥¼ í˜¸ì¶œí•˜ê¸° ìœ„í•´ ë°œê¸‰ë˜ëŠ” ì¸ì¦ í‚¤
                    - API ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì¸ì¦í•˜ê³  ìŠ¹ì¸í•œë‹¤.
                    - ì£¼ë¡œ ì„œë²„ ê°„ì˜ í†µì‹ ì´ë‚˜ íŠ¹ì • ì„œë¹„ìŠ¤ì˜ APIë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©ëœë‹¤.
        2. ì¸ì¦ì„ ìœ„í•œ ì½”ë“œ ì‘ì„±
            ```javascript
            // src/auth.config.js
            
            import dotenv from "dotenv";
            import { prisma } from "./db.config.js";
            import { Strategy as KakaoStrategy } from "passport-kakao";
            
            export const kakaoStrategy = new KakaoStrategy(
                {
                    clientID: process.env.PASSPORT_KAKAO_CLIENT_ID, // REST API Key
                    callbackURL: "http://localhost:3001/auth/kakao/callback",
                    scope: ["account_email"],
                    state: true,
                },
                (accessToken, refreshToken, profile, cb) => {
                    return kakaoVerify(profile)
                    .then((member) => cb(null, member))
                    .catch((err) => cb(err));
                }
            );
            
            const kakaoVerify = async(profile) => {
                const email = profile._json.kakao_account.email; // í”„ë¡œí•„ ì •ë³´ì— ì´ë©”ì¼ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ í™•ì¸
                console.log("email: ", email);
                if (!email){
                    throw new Error(`profile.email was not found: ${profile}`);
                }
                const member = await prisma.member.findFirst({where: { email }}); // ì´ë©”ì¼ë¡œ ì‚¬ìš©ì ì¡°íšŒ
                if (member !== null){ 
                    return { id: member.id.toString(), email: member.email, name: member.name };
                }
                const created = await prisma.member.create({ // ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ì§€ ì•Šì„ ì‹œ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš©ì ì •ë³´ë¥¼ ìë™ ìƒì„±í•œë‹¤.
                    data: {
                        email,
                        name: profile.displayName,
                        nickname: "ì¶”í›„ ìˆ˜ì •",
                        gender: 0,
                        birth: new Date(2000, 4, 24),
                        location: "ì¶”í›„ ìˆ˜ì •",
                        phoneNumber: "ì¶”í›„ ìˆ˜ì •",
                    },
                });
                console.log(created);
                return { id: created.id.toString(), email: created.email, name: created.name };
            };
            ```
            ```javascript
            # Kakao Developerì—ì„œ ë°œê¸‰ ë°›ì€ ê°’
            PASSPORT_KAKAO_CLIENT_ID="79d4d1db9a703ff7..."
            ```
            - ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì— íŠ¹í™”ëœ ë°©ì‹ìœ¼ë¡œ í™•ì¥í•˜ê¸° ìœ„í•´ passport-kakaoë¥¼ ì„¤ì¹˜í•˜ì˜€ë‹¤.
            - clientID, callbackURLì€ ì¹´ì¹´ì˜¤ ë””ë²¨ë¡œí¼ì—ì„œ ì„¤ì •í•œ ê²ƒê³¼ ê°™ì´ ì§€ì •í•´ì£¼ì—ˆê³  scopeì€ ì´ë©”ì¼(account_email)ë¡œ ì§€ì •í•´ ì¸ì¦ ê³¼ì •ì—ì„œ ì‚¬ìš©ìì˜ ì´ë©”ì¼ë§Œ ìš”ì²­í•˜ë„ë¡ í•˜ì˜€ë‹¤.<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì´ë©”ì¼_ID](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì´ë©”ì¼_ID.png)
                - ì—¬ê¸°ì„  ì¹´ì¹´ì˜¤ ê³„ì •(ì´ë©”ì¼)ì´ë¼ëŠ” í•­ëª©ì˜ IDê°€ â€œaccount_emailâ€ì´ë¼ëŠ” ì ì„ ìœ ì˜í•´ì•¼ í–ˆë‹¤. (â€email (X))
            - ê²€ì¦ í•¨ìˆ˜ì—ì„œ kakaoVerifyë¥¼ í†µí•´ ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ ë°›ì•„ ì´ë©”ì¼ì„ ì¡°íšŒí•œë‹¤.
            - ì´ë•Œ ì´ë©”ì¼ ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•Šë‹¤ë©´ êµ¬ê¸€ ê³„ì •ì— ì´ë©”ì¼ ì£¼ì†Œê°€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šê±°ë‚˜ ì´ë©”ì¼ ì •ë³´ë¥¼ ì œê³µí•˜ì§€ ì•Šì€ ìƒíƒœì´ë¯€ë¡œ êµ¬ê¸€ ê³„ì •ì´ í™œì„±í™”ë˜ì–´ ìˆëŠ”ì§€, ìš”ì²­í•œ ì‚¬ìš©ì ì •ë³´ ë²”ìœ„ì— ì´ë©”ì¼ì´ í¬í•¨ë˜ì–´ ìˆëŠ”ì§€ ì‚´í´ë³´ì•„ì•¼ í•œë‹¤.
            - ë˜í•œ ì—¬ê¸°ì„œ ì£¼ì˜í•´ì•¼ í•  ì ì€ ì¹´ì¹´ì˜¤ì˜ profile ê°ì²´ì˜ í˜•íƒœê°€ êµ¬ê¸€ê³¼ ë‹¤ë¥´ë‹¤ëŠ” ì ì´ë‹¤. passport ë§ˆë‹¤ profile ê°ì²´ì˜ í˜•íƒœê°€ ë‹¤ë¥´ë‹ˆ profileì„ ì¶œë ¥í•´ í™•ì¸í•´ë³´ëŠ” ê²Œ ì¢‹ì„ ê²ƒ ê°™ë‹¤.
                ```javascript
                {
                  provider: 'kakao',
                  id: 3807560827,
                  username: 'ì•ˆì„±ì§„',
                  displayName: 'ì•ˆì„±ì§„',
                  _raw: '{"id":3807560827,"connected_at":"2024-11-25T14:13:58Z","properties":{"nickname":"ì•ˆì„±ì§„"},"kakao_account":{"profile_nickname_needs_agreement":false,"profile":{"nickname":"ì•ˆì„±ì§„","is_default_nickname":false},"has_email":true,"email_needs_agreement":false,"is_email_valid":true,"is_email_verified":true,"email":"anseongjinasj@gmail.com"}}',  
                  _json: {
                    id: 3807560827,
                    connected_at: '2024-11-25T14:13:58Z',
                    properties: { nickname: 'ì•ˆì„±ì§„' },
                    kakao_account: {
                      profile_nickname_needs_agreement: false,    
                      profile: [Object],
                      has_email: true,
                      email_needs_agreement: false,
                      is_email_valid: true,
                      is_email_verified: true,
                      email: 'anseongjinasj@gmail.com'
                    }
                  }
                }
                ```
                - email ê°’ì€ profile ê°ì²´ > _json ê°ì²´ > kakao_account ê°ì²´ > email ê°’ì— ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
        3. Session ì„¤ì • ë° DB ìƒì„±
            - ì‹¤ìŠµê³¼ ê°™ë‹¤.
        4. Route ì„¤ì •
            ```javascript
            // src/index.js
            
            app.get("/oauth2/login/kakao", passport.authenticate("kakao"));
            app.get(
              "/oauth2/callback/kakao",
              passport.authenticate("kakao", {
                failureRedirect: "/oauth2/login/kakao",
                failureMessage: true,
              }),
              (req, res) => res.redirect("/")
            );
            ```
            - â€œ/oauth2/login/kakaoâ€ ê²½ë¡œë¡œ ì ‘ì† ì‹œ ìë™ìœ¼ë¡œ Kakao ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ë° ë™ì˜ë¥¼ í•˜ë©´ callbackURL(/oauth2/callback/kakao)ì—ì„œ ì¸ì¦ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ëœë‹¤. ì¸ì¦ì— ì„±ê³µí•  ê²½ìš°ì—” â€œ/â€ ê²½ë¡œë¡œ, ì‹¤íŒ¨í•  ê²½ìš°ì—” ë‹¤ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.
        5. ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
            ```javascript
            // src/index.js
            
            import { naverStrategy } from './auth.config.js';
            ...
            passport.use(kakaoStrategy);
            passport.serializeUser((member, done) => done(null, member)); // ì¸ì¦ ì„±ê³µ í›„ ì„¸ì…˜ì— íšŒì› ì •ë³´(member) ì €ì¥, done(ì—ëŸ¬, ì„¸ì…˜ì— ì €ì¥í•  ë°ì´í„°)
            passport.deserializeUser((member, done) => done(null, member)); // ì„¸ì…˜ì˜ ì •ë³´(member)ë¥¼ ê°€ì ¸ì™€ req.userì— í• ë‹¹
            ```
            - ì •ì˜í•œ kakao ë¡œê·¸ì¸ ì „ëµì„ passportì— ë“±ë¡í•œë‹¤.
        6. í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸_2.png)
            - localhost:3001/oauth2/login/kakao ì— ì ‘ì†í•´ ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ì„ ì§„í–‰í•œë‹¤.<br/>
            ![ë¯¸ì…˜-1-ì¸ì¦ì„±ê³µí›„_ë¦¬ë””ë ‰ì…˜](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì¸ì¦ì„±ê³µí›„_ë¦¬ë””ë ‰ì…˜.png)
            - ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ë©´ ì•„ë˜ì™€ ê°™ì´ â€œlocalhost:3001/â€ ê²½ë¡œë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.<br/>
            ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì¿ í‚¤í™•ì¸](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_ì¿ í‚¤í™•ì¸.png)
            - ë¡œê·¸ì¸(ì¸ì¦ ì„±ê³µ)ì„ í•˜ê³  ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•œë‹¤.
            - Kakao OAuth ì¸ì¦ì˜ ì½œë°± ì—”ë“œí¬ì¸íŠ¸(http://localhost:3001/oauth2/callback/kakao)ì™€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°(state, code, scope)ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ URLì„ ê±°ì³ ì¸ì¦ì„ ë§ˆì¹˜ê³  â€œ/â€ë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.<br/>
            ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_req.user_í™•ì¸](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_req.user_í™•ì¸.png)
            - â€œ/â€ ê²½ë¡œì—ì„œ req.userê°€ ì˜ ì„¤ì •ë˜ì–´ ì¸ì¦ëœ ê²ƒë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
        7. session, member í…Œì´ë¸” í™•ì¸
            - session í…Œì´ë¸”<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_session_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_session_í…Œì´ë¸”_í™•ì¸.png)
                - ì„¸ì…˜ ê´€ë ¨ ë°ì´í„°ê°€ session í…Œì´ë¸”ì— ì˜ ì €ì¥ë˜ì–´ ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
                - data
                    ```javascript
                    {
                    	"cookie":{
                    		"originalMaxAge":604800000,
                    		"expires":"2024-12-06T14:30:42.893Z",
                    		"httpOnly":true,
                    		"path":"/"
                    	},
                    	"passport":{
                    		"user":{
                    			"id":"20",
                    			"email":"anseongjinasj@gmail.com",
                    			"name":"ì•ˆì„±ì§„"
                    		}
                    	}
                    }
                    ```
            - member í…Œì´ë¸”<br/>
                ![ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_member_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-1-ì¹´ì¹´ì˜¤_member_í…Œì´ë¸”_í™•ì¸.png)
                - ì‚¬ìš©ì ë°ì´í„° ë˜í•œ ì˜ ì¶”ê°€ë˜ì—ˆë‹¤.
    2. ë„¤ì´ë²„ ë¡œê·¸ì¸ ì—°ë™
        1. ë„¤ì´ë²„ ë¡œê·¸ì¸ OAuth ì‹ ì²­
            1. ì• í”Œë¦¬ì¼€ì´ì…˜ ë“±ë¡í•˜ê¸°<br/>
                ![ë¯¸ì…˜-1-ë„¤ì´ë²„_ì• í”Œë¦¬ì¼€ì´ì…˜_ê°œìš”](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_ì• í”Œë¦¬ì¼€ì´ì…˜_ê°œìš”.png)
                - [ë„¤ì´ë²„ ë””ë²¨ë¡œë²„](https://developers.naver.com/main/)ì— ì ‘ì†í•´ ê¸°ì¡´ì˜ ë„¤ì´ë²„ ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í–ˆë‹¤.
                - ë°œê¸‰ ë°›ì€ Client ID ë° Client Secrete Keyë¥¼ í™•ì¸í•œë‹¤.<br/>
                ![ë¯¸ì…˜-1-ë„¤ì´ë²„_ì œê³µì •ë³´_ì„¤ì •](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_ì œê³µì •ë³´_ì„¤ì •.png)
                - ì œê³µ ì •ë³´ë¥¼ ì„ íƒí•œë‹¤. ì‚¬ìš©ì ì‹ë³„ì„ ìœ„í•´ ë„¤ì´ë²„ì—ì„œ ì´ë©”ì¼ ì •ë³´ë¥¼ ë°›ì•„ì™€ì•¼ í•˜ë¯€ë¡œ ì—°ë½ì²˜ ì´ë©”ì¼ ì£¼ì†Œë¥¼ í•„ìˆ˜ë¡œ ì²´í¬í•˜ì˜€ë‹¤.<br/>
                ![ë¯¸ì…˜-1-ë„¤ì´ë²„_CallbackURL_ì„¤ì •](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_CallbackURL_ì„¤ì •.png)
                - Authorized Redirect URIë¥¼ ì§€ì •í•œë‹¤.
        2. ì¸ì¦ì„ ìœ„í•œ ì½”ë“œ ì‘ì„±
            ```javascript
            import dotenv from "dotenv";
            import { prisma } from "./db.config.js";
            import { Strategy as NaverStrategy } from "passport-naver-v2";
            
            export const naverStrategy = new NaverStrategy(
                {
                    clientID: process.env.PASSPORT_NAVER_CLIENT_ID,
                    clientSecret: process.env.PASSPORT_NAVER_CLIENT_SECRET,
                    callbackURL: "http://localhost:3001/oauth2/callback/naver",
                    scope: ["email"],
                    state: true,
                },
                (accessToken, refreshToken, profile, cb) => {
                    console.log(profile);
                    return naverVerify(profile)
                    .then((member) => cb(null, member))
                    .catch((err) => cb(err));
                }
            );
            
            const naverVerify = async(profile) => {
                const email = profile.email;
                console.log("email: ", email);
                if (!email){
                    throw new Error(`profile.email was not found: ${profile}`);
                }
                const member = await prisma.member.findFirst({ where: { email }});
                if (member !== null){
                    return { id: member.id.toString(), email: member.email, name: member.name };
                }
                const created = await prisma.member.create({
                    data: {
                        email,
                        name: profile.displayName,
                        nickname: "ì¶”í›„ ìˆ˜ì •",
                        gender: 0,
                        birth: new Date(2000, 4, 24),
                        location: "ì¶”í›„ ìˆ˜ì •",
                        phoneNumber: "ì¶”í›„ ìˆ˜ì •",
                    },
                });
                console.log(created);
                return { id: created.id.toString(), email: created.email, name: created.name };
            }
            ```
            ```javascript
            # Naver Developerì—ì„œ ë°œê¸‰ ë°›ì€ ê°’
            PASSPORT_NAVER_CLIENT_ID="3d0xqaPgb3P41cBzoGVg"
            PASSPORT_NAVER_CLIENT_SECRET="W8ZKc1ZFkc"
            ```
            - naver ë¡œê·¸ì¸ ì—°ë™ ìµœì‹  ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ passport-naver-v2ë¥¼ ì„¤ì¹˜í•˜ì˜€ë‹¤.
                - ë„¤ì´ë²„ì—ì„œ êµ¬í˜„í•œ passport-naverê°€ ìˆìœ¼ë‚˜ 5-6ë…„ ì „ ê°œë°œ ì´í›„ë¡œ ë” ì´ìƒ ì§„ì „ì´ ì—†ê³  í”„ë¡œí•„ ë°ì´í„°ë„ í•œì •ì ìœ¼ë¡œ ì œê³µí•˜ê³  ìˆì–´ ìƒˆë¡œ ê°œì¸ì´ ê°œë°œí•œ ëª¨ë“ˆì´ë¼ê³  í•œë‹¤.
            - clientID, callbackURLì€ ë„¤ì´ë²„ ë””ë²¨ë¡œí¼ì—ì„œ ì„¤ì •í•œ ê²ƒê³¼ ê°™ì´ ì§€ì •í•´ì£¼ì—ˆê³  scopeì€ ì´ë©”ì¼(email)ë¡œ ì§€ì •í•´ ì¸ì¦ ê³¼ì •ì—ì„œ ì‚¬ìš©ìì˜ ì´ë©”ì¼ë§Œ ìš”ì²­í•˜ë„ë¡ í•˜ì˜€ë‹¤.
            - ê²€ì¦ í•¨ìˆ˜ì—ì„œ NaverVerifyë¥¼ í†µí•´ ì‚¬ìš©ì í”„ë¡œí•„ ì •ë³´ë¥¼ ë°›ì•„ ì´ë©”ì¼ì„ ì¡°íšŒí•˜ì˜€ë‹¤.
            - ì—¬ê¸°ì„œë„ profile ê°ì²´ì˜ í˜•íƒœë¥¼ í™•ì¸í•˜ì—¬ profileì—ì„œ ì´ë©”ì¼ ì£¼ì†Œë¥¼ ì˜ ê°€ì ¸ì˜¤ë„ë¡ í•´ì•¼ í•œë‹¤.
                ```javascript
                {
                  provider: 'naver',
                  id: 'or9z2kRMIaX1I7qsZQzH30mohU2MAP5wGkvmz61cyDo',
                  nickname: 'asj',
                  profileImage: 'https://ssl.pstatic.net/static/pwe/address/img_profile.png',       
                  age: undefined,
                  gender: 'F',
                  email: 'asjasj3964@naver.com',
                  mobile: '010-9836-3964',
                  mobileE164: '+821098363964',
                  name: 'ì•ˆì„±ì§„',
                  birthday: '04-24',
                  birthYear: '2000',
                  _raw: '{"resultcode":"00","message":"success","response":{"id":"or9z2kRMIaX1I7qsZQzH30mohU2MAP5wGkvmz61cyDo","nickname":"asj","profile_image":"https:\\/\\/ssl.pstatic.net\\/static\\/pwe\\/address\\/img_profile.png","gender":"F","email":"asjasj3964@naver.com","mobile":"010-9836-3964","mobile_e164":"+821098363964","name":"\\uc548\\uc131\\uc9c4","birthday":"04-24","birthyear":"2000"}}',
                  _json: {
                    resultcode: '00',
                    message: 'success',
                    response: {
                      id: 'or9z2kRMIaX1I7qsZQzH30mohU2MAP5wGkvmz61cyDo',
                      nickname: 'asj',
                      profile_image: 'https://ssl.pstatic.net/static/pwe/address/img_profile.png',  
                      gender: 'F',
                      email: 'asjasj3964@naver.com',
                      mobile: '010-9836-3964',
                      mobile_e164: '+821098363964',
                      name: 'ì•ˆì„±ì§„',
                      birthday: '04-24',
                      birthyear: '2000'
                    }
                  }
                }
                ```
                - email ê°’ì€ profile ê°ì²´ > email ê°’ì— ìˆìŒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
        3. Session ì„¤ì • ë° DB ìƒì„±
            - ì‹¤ìŠµê³¼ ê°™ë‹¤.
        4. Route ì„¤ì •
            ```javascript
            app.get("/oauth2/login/naver", passport.authenticate("naver"));
            app.get(
              "/oauth2/callback/naver",
              passport.authenticate("naver", {
                failureRedirect: "/oauth2/login/naver",
                failureMessage: true,
              }),
              (req, res) => res.redirect("/")
            );
            ```
            - â€œ/oauth2/login/naverâ€ ê²½ë¡œë¡œ ì ‘ì† ì‹œ ìë™ìœ¼ë¡œ Naver ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ë° ë™ì˜ë¥¼ í•˜ë©´ callbackURL(/oauth2/callback/naver)ì—ì„œ ì¸ì¦ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ëœë‹¤. ì¸ì¦ì— ì„±ê³µí•  ê²½ìš°ì—” â€œ/â€ ê²½ë¡œë¡œ, ì‹¤íŒ¨í•  ê²½ìš°ì—” ë‹¤ì‹œ ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.
        5. ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
            ```javascript
            // src/index.js
            
            import { naverStrategy } from './auth.config.js';
            ...
            passport.use(naverStrategy);
            passport.serializeUser((member, done) => done(null, member)); // ì¸ì¦ ì„±ê³µ í›„ ì„¸ì…˜ì— íšŒì› ì •ë³´(member) ì €ì¥, done(ì—ëŸ¬, ì„¸ì…˜ì— ì €ì¥í•  ë°ì´í„°)
            passport.deserializeUser((member, done) => done(null, member)); // ì„¸ì…˜ì˜ ì •ë³´(member)ë¥¼ ê°€ì ¸ì™€ req.userì— í• ë‹¹
            ```
            - ì •ì˜í•œ kakao ë¡œê·¸ì¸ ì „ëµì„ passportì— ë“±ë¡í•œë‹¤.
        6. í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-1-ë„¤ì´ë²„_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_ë¡œê·¸ì¸_í…ŒìŠ¤íŠ¸.png)
            - localhost:3001/oauth2/login/naver ì— ì ‘ì†í•´ ë„¤ì´ë²„ ë¡œê·¸ì¸ì„ ì§„í–‰í•œë‹¤.<br/>
            ![ë¯¸ì…˜-1-ë„¤ì´ë²„_ì¸ì¦ì„±ê³µí›„_ë¦¬ë””ë ‰ì…˜](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_ì¸ì¦ì„±ê³µí›„_ë¦¬ë””ë ‰ì…˜.png)
            - ë¡œê·¸ì¸ì´ ì™„ë£Œë˜ë©´ ì•„ë˜ì™€ ê°™ì´ â€œlocalhost:3001/â€ ê²½ë¡œë¡œ ë¦¬ë””ë ‰ì…˜ ëœë‹¤.<br/>
            ![ë¯¸ì…˜-1-ë„¤ì´ë²„_ì¿ í‚¤í™•ì¸](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_ì¿ í‚¤í™•ì¸.png)
            - Kakao OAuth ì¸ì¦ì˜ ì½œë°± ì—”ë“œí¬ì¸íŠ¸ì™€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
        7. session, member í…Œì´ë¸” í™•ì¸
            - session í…Œì´ë¸”<br/>
                ![ë¯¸ì…˜-1-ë„¤ì´ë²„_session_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_session_í…Œì´ë¸”_í™•ì¸.png)
                - data
                    ```javascript
                    {
                    	"cookie":{
                    		"originalMaxAge":604800000,
                    		"expires":"2024-12-07T03:55:36.413Z",
                    		"httpOnly":true,
                    		"path":"/"
                    	},
                    	"passport":{
                    		"user":{
                    			"id":"1",
                    			"email":"asjasj3964@naver.com",
                    			"name":"ì•ˆì„±ì§„"
                    		}
                    	}
                    }
                    ```
            - member í…Œì´ë¸”<br/>
                ![ë¯¸ì…˜-1-ë„¤ì´ë²„_member_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_member_í…Œì´ë¸”_í™•ì¸.png)
2. ê¸°ì¡´ì˜ í•˜ë“œ ì½”ë”© í–ˆë˜ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ê¸°
    1. ì‹ë‹¹ì„ ë“±ë¡í•˜ëŠ” API
        - ê¸°ì¡´ì—ëŠ” ì‹ë‹¹ì„ ë“±ë¡í•  ë•Œ request bodyì— CEO IDë¥¼ ì¼ì¼ì´ ì§€ì •í•´ì£¼ëŠ” ì‹ìœ¼ë¡œ í•˜ë“œì½”ë”© í•˜ì˜€ë‹¤. ì´ë¥¼ ìˆ˜ì •í•´ ì†Œì…œ ë¡œê·¸ì¸ì„ í•  ë•Œ ì¸ì¦ ì„±ê³µ ì‹œ passportê°€ req.userì— ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•œ ê²ƒì„ ì´ìš©í•˜ì˜€ë‹¤.
            ```javascript
            // src/controllers/restaurant.controller.js
            
            export const handleRestaurantRegist = async(req, res, next) => {
                const memberId = req.user.id; // ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ IDë¥¼ ê°€ì ¸ì˜¨ë‹¤.
                const restaurant = await restaurantRegist(memberId, bodyToRestaurant(req.body));
                res.status(StatusCodes.OK).success(restaurant);
            }
            ```
            ```javascript
            // src/services/restaurant.service.js
            
            export const restaurantRegist = async(memberId, data) => {
                const ceo = await getMember(memberId);
                if (ceo === null){
                    throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” CEO", data);
                }
                ...
                const registRestaurantId = await addRestaurant({
                    ceo: memberId,
                    region: data.regionId,
                    name: data.name,
                    introduction: data.introduction,
                    startTime: data.startTime,
                    endTime: data.endTime
                })
                ...
            }
            ```
            - req.user.idë¡œ ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ IDë¥¼ ê°€ì ¸ì™€ ì‹ë‹¹ì˜ CEOë¥¼ ì§€ì •í•´ì£¼ì—ˆë‹¤.
        - Swagger í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-2-ì‹ë‹¹ë“±ë¡_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ì‹ë‹¹ë“±ë¡_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ì‹ë‹¹ë“±ë¡_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-2-ì‹ë‹¹ë“±ë¡_í…ŒìŠ¤íŠ¸_2.png)
            - CEO IDë¥¼ ì£¼ì§€ ì•Šì•„ë„ ì‹ë‹¹ì„ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ì†Œì…œ ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìê°€ CEOë¡œ ì§€ì •ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
    2. ë¦¬ë·°ë¥¼ ë“±ë¡í•˜ëŠ” API
        - ê¸°ì¡´ì—ëŠ” ë¦¬ë·°ì„ ë“±ë¡í•  ë•Œ writer IDë¥¼ ì§ì ‘ ì£¼ì—ˆëŠ”ë° ì´ë¥¼ ìˆ˜ì •í•´ ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ID(req.user.id)ë¥¼ ê°€ì ¸ì™€ writerë¡œ ì§€ì •í•´ì£¼ì—ˆë‹¤.
            ```javascript
            // src/controllers/review.controller.js
            
            export const handleReviewRegist = async(req, res, next) => {
                const memberId = req.user.id;
                const review = await reviewRegist(memberId, bodyToReview(req.body));
                res.status(StatusCodes.OK).success(review)
            }
            ```
            ```javascript
            // src/services/review.service.js
            
            export const reviewRegist = async(memberId, data) => {
                ...
                const member = await getMember(memberId);
                if (member === null){
                    throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›", {memberId: memberId})
                }
                const registReviewId = await addReview({
                    member: memberId,
                    restaurant: data.restaurantId,
                    rating: data.rating,
                    content: data.content
                })
                ...
            }
            ```
        - Swagger í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-2-ë¦¬ë·°ë“±ë¡_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ë¦¬ë·°ë“±ë¡_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ë¦¬ë·°ë“±ë¡_í…ŒìŠ¤íŠ¸_2.png](images/ë¯¸ì…˜-2-ë¦¬ë·°ë“±ë¡_í…ŒìŠ¤íŠ¸_2.png)
            - writer IDë¥¼ ì£¼ì§€ ì•Šì•„ë„ ë¦¬ë·°ë¥¼ ë“±ë¡í•˜ë©´ ìë™ìœ¼ë¡œ ì†Œì…œ ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìê°€ writerë¡œ ì§€ì •ëœë‹¤.
    3. ì°¸ì—¬ ë¯¸ì…˜ì„ ë“±ë¡í•˜ëŠ” API
        - ê¸°ì¡´ì—ëŠ” ì°¸ì—¬ ë¯¸ì…˜ ë“±ë¡ ì‹œ í•´ë‹¹ ë¯¸ì…˜ì— ì°¸ì—¬í•  íšŒì›ì˜ IDë¥¼ ì§ì ‘ ì£¼ì—ˆëŠ”ë° ì´ë¥¼ ìˆ˜ì •í•´ ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ID(req.user.id)ë¥¼ ê°€ì ¸ì™€ ì°¸ì—¬ìë¡œ ì§€ì •í•´ì£¼ì—ˆë‹¤.
            ```javascript
            // src/controllers/participated-mission.controller.js
            
            export const handleMemberMissionRegist = async(req, res, next) => {
                const memberId = req.user.id;
                const memberMission = await memberMissionRegist(memberId, bodyToMemberMission(req.body)); // ìš”ì²­ ë°ì´í„°ë¥¼ DTOë¡œ ë³€í™˜ (member ê°ì²´ ìƒì„±)
                res.status(StatusCodes.OK).success(memberMission); 
            }
            ```
            ```javascript
            // src/services/participated-mission.service.js
            
            export const memberMissionRegist = async(memberId, data) => {
                const confirmMember = await getMember(memberId);
                if (confirmMember === null){
                    throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›", { memberId: memberId });
                }
                ...
                const registMemberMissionId = await registMemberMission(memberId, data);
                if (registMemberMissionId == null){
                    throw new DuplicateError("ì´ë¯¸ ì°¸ì—¬í•œ ë¯¸ì…˜", data);
                }
                ...
            }
            ```
        - Swagger í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ë“±ë¡_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ë“±ë¡_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ë“±ë¡_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ë“±ë¡_í…ŒìŠ¤íŠ¸_2.png)
    4. ë‚˜ì˜ ë¦¬ë·° ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” API
        - ì‘ì„±ì IDë¥¼ ì£¼ì§€ ì•Šì•„ë„ ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ID(req.user.id)ë¥¼ ê°€ì ¸ì™€ ê·¸ íšŒì›ì˜ ë¦¬ë·° ëª©ë¡ì„ ê°€ì ¸ì˜¤ë„ë¡ í•˜ì˜€ë‹¤.
            ```javascript
            // src/controllers/review.controller.js
            
            export const handleListReviews = async(req, res, next) => {
                const memberId = req.user.id;
                const reviews = await listReviews(
                    memberId,
                    typeof req.query.cursor === "string"? parseInt(req.query.cursor) : 0
                )
                res.status(StatusCodes.OK).success(reviews);
            }
            ```
            ```javascript
            // src/services/review.service.js
            
            export const listReviews = async(memberId, cursor) => {
                const member = await getMember(memberId);
                if (member === null){
                    throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›", { memberId: memberId });
                }
                const reviews = await getAllReviews(memberId, cursor);
                return responseFromReviews(reviews);
            } 
            ```
        - Swagger í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-2-ë¦¬ë·°ëª©ë¡ì¡°íšŒ_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ë¦¬ë·°ëª©ë¡ì¡°íšŒ_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ë¦¬ë·°ëª©ë¡ì¡°íšŒ_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-2-ë¦¬ë·°ëª©ë¡ì¡°íšŒ_í…ŒìŠ¤íŠ¸_2.png)
            - writer IDë¥¼ ì£¼ì§€ ì•Šê³  ë‚˜ì˜ ë¦¬ë·° ëª©ë¡ë“¤ì„ ì¡°íšŒí•  ìˆ˜ ìˆë‹¤.
    5. ë‚˜ì˜ ì°¸ì—¬ ë¯¸ì…˜ ëª©ë¡ì„ ì¡°íšŒí•˜ëŠ” API
        - íšŒì›ì˜ IDë¥¼ ì£¼ì§€ ì•Šê³ ë„ í•´ë‹¹ íšŒì›ì˜ ì°¸ì—¬ ë¯¸ì…˜ ëª©ë¡ì„ ì¡°íšŒí•˜ë„ë¡ í•˜ì˜€ë‹¤.
            ```javascript
            // src/controllers/participated-mission.controller.js
            
            export const handleMissionUpdateCompleted = async(req, res, next) => {
                const memberId = req.user.id;
                const missions = await memberMissionUpdateCompleted(
                    memberId,
                    parseInt(req.params.participatedMissionId),
                )
                res.status(StatusCodes.OK).success(missions);
            }
            ```
            ```javascript
            // src/services/participated-mission.service.js
            
            export const listMemberMissions = async(memberId, cursor) => {
                // í•´ë‹¹ íšŒì›ì´ ì¡´ì¬í•˜ì§€ ì•Šì„ ê²½ìš° ì—ëŸ¬ ì²˜ë¦¬
                const member = await getMember(memberId);
                if (member === null){
                    throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›", { memberId: memberId });
                }
                const missions = await getAllMemberMissions(memberId, cursor);
                return responseFromMemberMissions(missions);
            }
            ```
        - Swagger í…ŒìŠ¤íŠ¸<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ëª©ë¡_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ëª©ë¡_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ëª©ë¡_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜ëª©ë¡_í…ŒìŠ¤íŠ¸_2.png)
    6. ë‚˜ì˜ íŠ¹ì • ì°¸ì—¬ ë¯¸ì…˜ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” API
        - ê¸°ì¡´ì˜ APIëŠ” ì°¸ì—¬ ë¯¸ì…˜ IDë§Œ ì£¼ë©´ ì—…ë°ì´íŠ¸ í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ ì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜ê¹Œì§€ë„ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆê²Œ ëœë‹¤. ì´ë¥¼ ìˆ˜ì •í•´ ì†Œì…œ ë¡œê·¸ì¸í•œ ì‚¬ìš©ìì˜ ID(req.user.id)ë¥¼ ê°€ì ¸ì™€ íšŒì›ì˜ IDë¥¼ ë”°ë¡œ ì£¼ì§€ ì•Šê³ ë„ íšŒì›ì´ ì°¸ì—¬í•˜ì§€ ì•Šì€(ë§¤í•‘ë˜ì§€ ì•Šì€) ë¯¸ì…˜ì€ â€œì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜â€ì´ë¼ëŠ” ì—ëŸ¬ ë©”ì‹œì§€ê°€ ë°œìƒí•˜ë„ë¡ í•˜ì˜€ë‹¤.
            ```javascript
            // src/controllers/participated-mission.controller.js
            
            export const handleListMemberMission = async(req, res, next) => {
                const memberId = req.user.id;
                const missions = await listMemberMissions(
                    memberId,
                    typeof req.query.cursor === "string"? parseInt(req.query.cursor) : 0
                )
                res.status(StatusCodes.OK).success(missions);
            }
            ```
            ```javascript
            // src/services/participated-mission.service.js
            
            export const memberMissionUpdateCompleted = async(memberId, participatedMissionId) => {
                // íšŒì›ì´ ì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜ì¼ ê²½ìš° ì—ëŸ¬ ì²˜ë¦¬
                const confirmMemberMission = await getMemberMission(participatedMissionId);
                if (confirmMemberMission == null || confirmMemberMission.member.id != memberId){
                    throw new NotExistError("íšŒì›ì´ ì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜", {participatedMissionId: participatedMissionId});
                }
                ...
            }
            ```
        - Swagger í…ŒìŠ¤íŠ¸ - íšŒì›ì´ ì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜ IDë¥¼ ì¤„ ê²½ìš°<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜_ì—…ë°ì´íŠ¸_í…ŒìŠ¤íŠ¸_1](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜_ì—…ë°ì´íŠ¸_í…ŒìŠ¤íŠ¸_1.png)<br/>
            ![ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜_ì—…ë°ì´íŠ¸_í…ŒìŠ¤íŠ¸_2](images/ë¯¸ì…˜-2-ì°¸ì—¬ë¯¸ì…˜_ì—…ë°ì´íŠ¸_í…ŒìŠ¤íŠ¸_2.png)
            - íšŒì›ì´ ì°¸ì—¬í•˜ì§€ ì•Šì€ ë¯¸ì…˜ì€ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ë„ìš´ë‹¤.
3. ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ìˆ˜ì •í•˜ëŠ” APIë¥¼ ë§Œë“¤ê¸°<br/>
    ![ë¯¸ì…˜-1-ë„¤ì´ë²„_member_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-1-ë„¤ì´ë²„_member_í…Œì´ë¸”_í™•ì¸.png)
    - ì²« ë„¤ì´ë²„ ë¡œê·¸ì¸ì„ í•˜ë©´ ì‚¬ìš©ìì˜ ë°ì´í„°ê°€ strategyì˜ ê²€ì¦í•¨ìˆ˜ì—ì„œ ì§€ì •í•œ ë””í´íŠ¸ ê°’ìœ¼ë¡œ ì§€ì •ëœë‹¤. ì´ë¥¼ ìˆ˜ì •í•˜ê¸° ìœ„í•œ APIë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.
        ```javascript
        // src/controllers/member.controller.js
        
        export const handleMemberUpdate = async(req, res, next) => {
            const memberId = req.user.id;
            const member = await memberUpdate(memberId, bodyToUpdateMember(req.body));
            res.status(StatusCodes.OK).success(member);
        }
        ```
        ```javascript
        // src/services/member.service.js
        
        export const memberUpdate = async(memberId, data) => {
            const member = await getMember(memberId);
            if (member === null){
                throw new NotExistError("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íšŒì›", { memberId: memberId });
            }
            await updateMember(memberId, data);
            const updatedMember = await getMember(memberId);
            return ResponseFromUpdatedMember(updatedMember);
        }
        ```
        ```javascript
        // src/repositories/member.repository.js
        
        // ë‚˜ì˜ ì •ë³´ ì—…ë°ì´íŠ¸
        export const updateMember = async(memberId, data) => {
            try{
                const memberUpdated = await prisma.member.update({
                    where: {
                        id: memberId
                    },
                    data: {
                        name: data.name,
                        nickname: data.nickname,
                        gender: data.gender,
                        birth: data.birth,
                        location: data.location,
                        phoneNumber: data.phoneNumber
                    }
                });
                return memberUpdated;
            }
            catch(err){
                throw new ServerError(`ì„œë²„ ë‚´ë¶€ ì˜¤ë¥˜: ${err.stack}`);
            }
        }
        ```
        - req.user.idì—ì„œ ë¡œê·¸ì¸ í•œ ì‚¬ìš©ìì˜ IDë¥¼ ê°€ì ¸ì™€ í•´ë‹¹ ì‚¬ìš©ìê°€ ì¡´ì¬í•˜ëŠ”ì§€ ìœ íš¨ ê²€ì‚¬ë¥¼ í•˜ê³  ì¡´ì¬í•œë‹¤ë©´ ì…ë ¥í•œ ê°’ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•˜ë„ë¡ ë§Œë“¤ì–´ì£¼ì—ˆë‹¤.
    - Swagger í…ŒìŠ¤íŠ¸<br/>
        ![ë¯¸ì…˜-3-íšŒì›ì •ë³´_ìˆ˜ì •_1](images/ë¯¸ì…˜-3-íšŒì›ì •ë³´_ìˆ˜ì •_1.png)<br/>
        ![ë¯¸ì…˜-3-íšŒì›ì •ë³´_ìˆ˜ì •_2](images/ë¯¸ì…˜-3-íšŒì›ì •ë³´_ìˆ˜ì •_2.png)
        - íšŒì›ì˜ ì •ë³´ê°€ ì„±ê³µì ìœ¼ë¡œ ìˆ˜ì •ë˜ì—ˆê³  ì´ëŠ” member í…Œì´ë¸”ì—ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br/>
            ![ë¯¸ì…˜-3-member_í…Œì´ë¸”_í™•ì¸](images/ë¯¸ì…˜-3-member_í…Œì´ë¸”_í™•ì¸.png)